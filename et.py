import itertools
import json

from eth_typing import BlockNumber, HexStr, ChecksumAddress
from eth_utils import hexstr_if_str, to_bytes
from hexbytes import HexBytes
from web3 import Web3
from web3._utils.abi import exclude_indexed_event_inputs, normalize_event_input_types, get_indexed_event_inputs, \
    get_abi_input_names, map_abi_data
from web3._utils.events import get_event_data, get_event_abi_types_for_decoding
from web3._utils.normalizers import BASE_RETURN_NORMALIZERS
from web3.auto import w3
from web3.datastructures import AttributeDict
from web3.exceptions import InvalidEventABI

url = 'https://mainnet.infura.io/v3/4e8a6f9c94d54bccbf47f5f8230eaf4b'
from web3.types import FilterParams, LogReceipt, ABIEvent


# url = 'wss://mainnet.infura.io/ws/v3/4e8a6f9c94d54bccbf47f5f8230eaf4b'


def main():
    # web3 = Web3(Web3.HTTPProvider(url))
    web3 = Web3(Web3.HTTPProvider(url))
    abi = '[{"name":"TokenExchange","inputs":[{"type":"address","name":"buyer","indexed":true},{"type":"int128","name":"sold_id","indexed":false},{"type":"uint256","name":"tokens_sold","indexed":false},{"type":"int128","name":"bought_id","indexed":false},{"type":"uint256","name":"tokens_bought","indexed":false}],"anonymous":false,"type":"event"},{"name":"TokenExchangeUnderlying","inputs":[{"type":"address","name":"buyer","indexed":true},{"type":"int128","name":"sold_id","indexed":false},{"type":"uint256","name":"tokens_sold","indexed":false},{"type":"int128","name":"bought_id","indexed":false},{"type":"uint256","name":"tokens_bought","indexed":false}],"anonymous":false,"type":"event"},{"name":"AddLiquidity","inputs":[{"type":"address","name":"provider","indexed":true},{"type":"uint256[4]","name":"token_amounts","indexed":false},{"type":"uint256[4]","name":"fees","indexed":false},{"type":"uint256","name":"invariant","indexed":false},{"type":"uint256","name":"token_supply","indexed":false}],"anonymous":false,"type":"event"},{"name":"RemoveLiquidity","inputs":[{"type":"address","name":"provider","indexed":true},{"type":"uint256[4]","name":"token_amounts","indexed":false},{"type":"uint256[4]","name":"fees","indexed":false},{"type":"uint256","name":"token_supply","indexed":false}],"anonymous":false,"type":"event"},{"name":"RemoveLiquidityImbalance","inputs":[{"type":"address","name":"provider","indexed":true},{"type":"uint256[4]","name":"token_amounts","indexed":false},{"type":"uint256[4]","name":"fees","indexed":false},{"type":"uint256","name":"invariant","indexed":false},{"type":"uint256","name":"token_supply","indexed":false}],"anonymous":false,"type":"event"},{"name":"CommitNewAdmin","inputs":[{"type":"uint256","name":"deadline","indexed":true,"unit":"sec"},{"type":"address","name":"admin","indexed":true}],"anonymous":false,"type":"event"},{"name":"NewAdmin","inputs":[{"type":"address","name":"admin","indexed":true}],"anonymous":false,"type":"event"},{"name":"CommitNewParameters","inputs":[{"type":"uint256","name":"deadline","indexed":true,"unit":"sec"},{"type":"uint256","name":"A","indexed":false},{"type":"uint256","name":"fee","indexed":false},{"type":"uint256","name":"admin_fee","indexed":false}],"anonymous":false,"type":"event"},{"name":"NewParameters","inputs":[{"type":"uint256","name":"A","indexed":false},{"type":"uint256","name":"fee","indexed":false},{"type":"uint256","name":"admin_fee","indexed":false}],"anonymous":false,"type":"event"},{"outputs":[],"inputs":[{"type":"address[4]","name":"_coins"},{"type":"address[4]","name":"_underlying_coins"},{"type":"address","name":"_pool_token"},{"type":"uint256","name":"_A"},{"type":"uint256","name":"_fee"}],"constant":false,"payable":false,"type":"constructor"},{"name":"get_virtual_price","outputs":[{"type":"uint256","name":"out"}],"inputs":[],"constant":true,"payable":false,"type":"function","gas":1535185},{"name":"calc_token_amount","outputs":[{"type":"uint256","name":"out"}],"inputs":[{"type":"uint256[4]","name":"amounts"},{"type":"bool","name":"deposit"}],"constant":true,"payable":false,"type":"function","gas":6067881},{"name":"add_liquidity","outputs":[],"inputs":[{"type":"uint256[4]","name":"amounts"},{"type":"uint256","name":"min_mint_amount"}],"constant":false,"payable":false,"type":"function","gas":9327083},{"name":"get_dy","outputs":[{"type":"uint256","name":"out"}],"inputs":[{"type":"int128","name":"i"},{"type":"int128","name":"j"},{"type":"uint256","name":"dx"}],"constant":true,"payable":false,"type":"function","gas":3454227},{"name":"get_dx","outputs":[{"type":"uint256","name":"out"}],"inputs":[{"type":"int128","name":"i"},{"type":"int128","name":"j"},{"type":"uint256","name":"dy"}],"constant":true,"payable":false,"type":"function","gas":3454232},{"name":"get_dy_underlying","outputs":[{"type":"uint256","name":"out"}],"inputs":[{"type":"int128","name":"i"},{"type":"int128","name":"j"},{"type":"uint256","name":"dx"}],"constant":true,"payable":false,"type":"function","gas":3454087},{"name":"get_dx_underlying","outputs":[{"type":"uint256","name":"out"}],"inputs":[{"type":"int128","name":"i"},{"type":"int128","name":"j"},{"type":"uint256","name":"dy"}],"constant":true,"payable":false,"type":"function","gas":3454093},{"name":"exchange","outputs":[],"inputs":[{"type":"int128","name":"i"},{"type":"int128","name":"j"},{"type":"uint256","name":"dx"},{"type":"uint256","name":"min_dy"}],"constant":false,"payable":false,"type":"function","gas":7030208},{"name":"exchange_underlying","outputs":[],"inputs":[{"type":"int128","name":"i"},{"type":"int128","name":"j"},{"type":"uint256","name":"dx"},{"type":"uint256","name":"min_dy"}],"constant":false,"payable":false,"type":"function","gas":7050194},{"name":"remove_liquidity","outputs":[],"inputs":[{"type":"uint256","name":"_amount"},{"type":"uint256[4]","name":"min_amounts"}],"constant":false,"payable":false,"type":"function","gas":240409},{"name":"remove_liquidity_imbalance","outputs":[],"inputs":[{"type":"uint256[4]","name":"amounts"},{"type":"uint256","name":"max_burn_amount"}],"constant":false,"payable":false,"type":"function","gas":9326310},{"name":"commit_new_parameters","outputs":[],"inputs":[{"type":"uint256","name":"amplification"},{"type":"uint256","name":"new_fee"},{"type":"uint256","name":"new_admin_fee"}],"constant":false,"payable":false,"type":"function","gas":145867},{"name":"apply_new_parameters","outputs":[],"inputs":[],"constant":false,"payable":false,"type":"function","gas":133482},{"name":"revert_new_parameters","outputs":[],"inputs":[],"constant":false,"payable":false,"type":"function","gas":21805},{"name":"commit_transfer_ownership","outputs":[],"inputs":[{"type":"address","name":"_owner"}],"constant":false,"payable":false,"type":"function","gas":74482},{"name":"apply_transfer_ownership","outputs":[],"inputs":[],"constant":false,"payable":false,"type":"function","gas":60538},{"name":"revert_transfer_ownership","outputs":[],"inputs":[],"constant":false,"payable":false,"type":"function","gas":21895},{"name":"withdraw_admin_fees","outputs":[],"inputs":[],"constant":false,"payable":false,"type":"function","gas":22667},{"name":"kill_me","outputs":[],"inputs":[],"constant":false,"payable":false,"type":"function","gas":37848},{"name":"unkill_me","outputs":[],"inputs":[],"constant":false,"payable":false,"type":"function","gas":21985},{"name":"coins","outputs":[{"type":"address","name":"out"}],"inputs":[{"type":"int128","name":"arg0"}],"constant":true,"payable":false,"type":"function","gas":2160},{"name":"underlying_coins","outputs":[{"type":"address","name":"out"}],"inputs":[{"type":"int128","name":"arg0"}],"constant":true,"payable":false,"type":"function","gas":2190},{"name":"balances","outputs":[{"type":"uint256","name":"out"}],"inputs":[{"type":"int128","name":"arg0"}],"constant":true,"payable":false,"type":"function","gas":2220},{"name":"A","outputs":[{"type":"uint256","name":"out"}],"inputs":[],"constant":true,"payable":false,"type":"function","gas":2051},{"name":"fee","outputs":[{"type":"uint256","name":"out"}],"inputs":[],"constant":true,"payable":false,"type":"function","gas":2081},{"name":"admin_fee","outputs":[{"type":"uint256","name":"out"}],"inputs":[],"constant":true,"payable":false,"type":"function","gas":2111},{"name":"owner","outputs":[{"type":"address","name":"out"}],"inputs":[],"constant":true,"payable":false,"type":"function","gas":2141},{"name":"admin_actions_deadline","outputs":[{"type":"uint256","unit":"sec","name":"out"}],"inputs":[],"constant":true,"payable":false,"type":"function","gas":2171},{"name":"transfer_ownership_deadline","outputs":[{"type":"uint256","unit":"sec","name":"out"}],"inputs":[],"constant":true,"payable":false,"type":"function","gas":2201},{"name":"future_A","outputs":[{"type":"uint256","name":"out"}],"inputs":[],"constant":true,"payable":false,"type":"function","gas":2231},{"name":"future_fee","outputs":[{"type":"uint256","name":"out"}],"inputs":[],"constant":true,"payable":false,"type":"function","gas":2261},{"name":"future_admin_fee","outputs":[{"type":"uint256","name":"out"}],"inputs":[],"constant":true,"payable":false,"type":"function","gas":2291},{"name":"future_owner","outputs":[{"type":"address","name":"out"}],"inputs":[],"constant":true,"payable":false,"type":"function","gas":2321}]'
    contract = web3.eth.contract(address='0x45F783CCE6B7FF23B2ab2D70e416cdb7D6055f51', abi=abi)
    x = contract.functions.coins(4).call()
    print(x)

    # print(web3.isConnected())
    # print(web3.eth.blockNumber)
    # balance = web3.eth.getBalance("0x90e63c3d53E0Ea496845b7a03ec7548B70014A91")
    # print(balance)
    # print(web3.fromWei(balance, "ether"))

    # abi_str = '[{"constant": true, "inputs": [], "name": "mintingFinished", "outputs": [{"name": "", "type": "bool"}], "payable": false, "type": "function"}, {"constant": true, "inputs": [], "name": "name", "outputs": [{"name": "", "type": "string"}], "payable": false, "type": "function"}, {"constant": false, "inputs": [{"name": "_spender", "type": "address"}, {"name": "_value", "type": "uint256"}], "name": "approve", "outputs": [], "payable": false, "type": "function"}, {"constant": true, "inputs": [], "name": "totalSupply", "outputs": [{"name": "", "type": "uint256"}], "payable": false, "type": "function"}, {"constant": false, "inputs": [{"name": "_from", "type": "address"}, {"name": "_to", "type": "address"}, {"name": "_value", "type": "uint256"}], "name": "transferFrom", "outputs": [], "payable": false, "type": "function"}, {"constant": true, "inputs": [], "name": "decimals", "outputs": [{"name": "", "type": "uint256"}], "payable": false, "type": "function"}, {"constant": false, "inputs": [], "name": "unpause", "outputs": [{"name": "", "type": "bool"}], "payable": false, "type": "function"}, {"constant": false, "inputs": [{"name": "_to", "type": "address"}, {"name": "_amount", "type": "uint256"}], "name": "mint", "outputs": [{"name": "", "type": "bool"}], "payable": false, "type": "function"}, {"constant": true, "inputs": [], "name": "paused", "outputs": [{"name": "", "type": "bool"}], "payable": false, "type": "function"}, {"constant": true, "inputs": [{"name": "_owner", "type": "address"}], "name": "balanceOf", "outputs": [{"name": "balance", "type": "uint256"}], "payable": false, "type": "function"}, {"constant": false, "inputs": [], "name": "finishMinting", "outputs": [{"name": "", "type": "bool"}], "payable": false, "type": "function"}, {"constant": false, "inputs": [], "name": "pause", "outputs": [{"name": "", "type": "bool"}], "payable": false, "type": "function"}, {"constant": true, "inputs": [], "name": "owner", "outputs": [{"name": "", "type": "address"}], "payable": false, "type": "function"}, {"constant": true, "inputs": [], "name": "symbol", "outputs": [{"name": "", "type": "string"}], "payable": false, "type": "function"}, {"constant": false, "inputs": [{"name": "_to", "type": "address"}, {"name": "_value", "type": "uint256"}], "name": "transfer", "outputs": [], "payable": false, "type": "function"}, {"constant": false, "inputs": [{"name": "_to", "type": "address"}, {"name": "_amount", "type": "uint256"}, {"name": "_releaseTime", "type": "uint256"}], "name": "mintTimelocked", "outputs": [{"name": "", "type": "address"}], "payable": false, "type": "function"}, {"constant": true, "inputs": [{"name": "_owner", "type": "address"}, {"name": "_spender", "type": "address"}], "name": "allowance", "outputs": [{"name": "remaining", "type": "uint256"}], "payable": false, "type": "function"}, {"constant": false, "inputs": [{"name": "newOwner", "type": "address"}], "name": "transferOwnership", "outputs": [], "payable": false, "type": "function"}, {"anonymous": false, "inputs": [{"indexed": true, "name": "to", "type": "address"}, {"indexed": false, "name": "value", "type": "uint256"}], "name": "Mint", "type": "event"}, {"anonymous": false, "inputs": [], "name": "MintFinished", "type": "event"}, {"anonymous": false, "inputs": [], "name": "Pause", "type": "event"}, {"anonymous": false, "inputs": [], "name": "Unpause", "type": "event"}, {"anonymous": false, "inputs": [{"indexed": true, "name": "owner", "type": "address"}, {"indexed": true, "name": "spender", "type": "address"}, {"indexed": false, "name": "value", "type": "uint256"}], "name": "Approval", "type": "event"}, {"anonymous": false, "inputs": [{"indexed": true, "name": "from", "type": "address"}, {"indexed": true, "name": "to", "type": "address"}, {"indexed": false, "name": "value", "type": "uint256"}], "name": "Transfer", "type": "event"}]'
    # abi = json.loads(abi_str)
    # address = "0xd26114cd6EE289AccF82350c8d8487fedB8A0C07"
    # contract = web3.eth.contract(address=address, abi=abi)

    # contract_address = '0x7C66550C9c730B6fdd4C03bc2e73c5462c5F7ACC'
    # event_filter = web3.eth.filter({
    #     "address": contract_address,
    #     "topics": ["0x30bbea603a7b36858fe5e3ec6ba5ff59dde039d02120d758eacfaed01520577d"],
    # })
    #
    # print(event_filter.get_all_entries())

    # filter_params = {
    #     "fromBlock": BlockNumber(10403236),
    #     # "toBlock": BlockNumber(10870468),
    #     "toBlock": BlockNumber(10423236),
    #     "address": ['0x7C66550C9c730B6fdd4C03bc2e73c5462c5F7ACC'],
    #     "topics": [
    #         HexStr('0x30bbea603a7b36858fe5e3ec6ba5ff59dde039d02120d758eacfaed01520577d')],
    # }
    #
    # result = web3.eth.getLogs(filter_params)
    # print(result)
    # print(len(result))

    # filter_params = {
    #     "fromBlock": BlockNumber(10825247),
    #     "toBlock": BlockNumber(10870468),
    #     # "toBlock": BlockNumber(10825247),
    #     "address": ['0x7C66550C9c730B6fdd4C03bc2e73c5462c5F7ACC'],
    #     "topics": [
    #         HexStr('0x30bbea603a7b36858fe5e3ec6ba5ff59dde039d02120d758eacfaed01520577d')],
    # }
    # data = '0x00000000000000000000000000000000000000000000000332ca1b67940c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000140000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000001a000000000000000000000000000000000000000000000000000000000000001e000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100455448205745544800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000332ca1b67940c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000de0b6b3a7640000'
    # contract_abi = '[{"inputs":[{"internalType":"address","name":"_admin","type":"address"},{"internalType":"contract IKyberStorage","name":"_kyberStorage","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"newAdmin","type":"address"},{"indexed":false,"internalType":"address","name":"previousAdmin","type":"address"}],"name":"AdminClaimed","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"newAlerter","type":"address"},{"indexed":false,"internalType":"bool","name":"isAdd","type":"bool"}],"name":"AlerterAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"EtherReceival","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"address","name":"sendTo","type":"address"}],"name":"EtherWithdraw","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"contract IGasHelper","name":"newGasHelper","type":"address"}],"name":"GasHelperUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"contract IKyberDao","name":"newKyberDao","type":"address"}],"name":"KyberDaoUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"contract IKyberFeeHandler","name":"newKyberFeeHandler","type":"address"}],"name":"KyberFeeHandlerUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"contract IKyberMatchingEngine","name":"newKyberMatchingEngine","type":"address"}],"name":"KyberMatchingEngineUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"maxGasPrice","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"negligibleRateDiffBps","type":"uint256"}],"name":"KyberNetworkParamsSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bool","name":"isEnabled","type":"bool"}],"name":"KyberNetworkSetEnable","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"kyberProxy","type":"address"}],"name":"KyberProxyAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"kyberProxy","type":"address"}],"name":"KyberProxyRemoved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"contract IERC20","name":"src","type":"address"},{"indexed":true,"internalType":"contract IERC20","name":"dest","type":"address"},{"indexed":false,"internalType":"uint256","name":"ethWeiValue","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"networkFeeWei","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"customPlatformFeeWei","type":"uint256"},{"indexed":false,"internalType":"bytes32[]","name":"t2eIds","type":"bytes32[]"},{"indexed":false,"internalType":"bytes32[]","name":"e2tIds","type":"bytes32[]"},{"indexed":false,"internalType":"uint256[]","name":"t2eSrcAmounts","type":"uint256[]"},{"indexed":false,"internalType":"uint256[]","name":"e2tSrcAmounts","type":"uint256[]"},{"indexed":false,"internalType":"uint256[]","name":"t2eRates","type":"uint256[]"},{"indexed":false,"internalType":"uint256[]","name":"e2tRates","type":"uint256[]"}],"name":"KyberTrade","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"contract IERC20","name":"token","type":"address"},{"indexed":false,"internalType":"address[]","name":"reserves","type":"address[]"},{"indexed":false,"internalType":"bool","name":"add","type":"bool"}],"name":"ListedReservesForToken","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"newOperator","type":"address"},{"indexed":false,"internalType":"bool","name":"isAdd","type":"bool"}],"name":"OperatorAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"contract IERC20","name":"token","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"address","name":"sendTo","type":"address"}],"name":"TokenWithdraw","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"pendingAdmin","type":"address"}],"name":"TransferAdminPending","type":"event"},{"inputs":[{"internalType":"address","name":"newAlerter","type":"address"}],"name":"addAlerter","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"kyberProxy","type":"address"}],"name":"addKyberProxy","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOperator","type":"address"}],"name":"addOperator","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"admin","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"claimAdmin","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"enabled","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getAlerters","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getAndUpdateNetworkFee","outputs":[{"internalType":"uint256","name":"networkFeeBps","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getContracts","outputs":[{"internalType":"contract IKyberFeeHandler","name":"kyberFeeHandlerAddress","type":"address"},{"internalType":"contract IKyberDao","name":"kyberDaoAddress","type":"address"},{"internalType":"contract IKyberMatchingEngine","name":"kyberMatchingEngineAddress","type":"address"},{"internalType":"contract IKyberStorage","name":"kyberStorageAddress","type":"address"},{"internalType":"contract IGasHelper","name":"gasHelperAddress","type":"address"},{"internalType":"contract IKyberNetworkProxy[]","name":"kyberProxyAddresses","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"contract ERC20","name":"src","type":"address"},{"internalType":"contract ERC20","name":"dest","type":"address"},{"internalType":"uint256","name":"srcQty","type":"uint256"}],"name":"getExpectedRate","outputs":[{"internalType":"uint256","name":"expectedRate","type":"uint256"},{"internalType":"uint256","name":"worstRate","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"contract IERC20","name":"src","type":"address"},{"internalType":"contract IERC20","name":"dest","type":"address"},{"internalType":"uint256","name":"srcQty","type":"uint256"},{"internalType":"uint256","name":"platformFeeBps","type":"uint256"},{"internalType":"bytes","name":"hint","type":"bytes"}],"name":"getExpectedRateWithHintAndFee","outputs":[{"internalType":"uint256","name":"rateWithNetworkFee","type":"uint256"},{"internalType":"uint256","name":"rateWithAllFees","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getNetworkData","outputs":[{"internalType":"uint256","name":"negligibleDiffBps","type":"uint256"},{"internalType":"uint256","name":"networkFeeBps","type":"uint256"},{"internalType":"uint256","name":"expiryTimestamp","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getOperators","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"contract IERC20","name":"token","type":"address"},{"internalType":"uint256","name":"startIndex","type":"uint256"},{"internalType":"uint256","name":"endIndex","type":"uint256"},{"internalType":"bool","name":"add","type":"bool"}],"name":"listReservesForToken","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"reserve","type":"address"},{"internalType":"contract IERC20","name":"token","type":"address"},{"internalType":"bool","name":"add","type":"bool"}],"name":"listTokenForReserve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"maxGasPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"pendingAdmin","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"alerter","type":"address"}],"name":"removeAlerter","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"kyberProxy","type":"address"}],"name":"removeKyberProxy","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"}],"name":"removeOperator","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"contract IKyberFeeHandler","name":"_kyberFeeHandler","type":"address"},{"internalType":"contract IKyberMatchingEngine","name":"_kyberMatchingEngine","type":"address"},{"internalType":"contract IGasHelper","name":"_gasHelper","type":"address"}],"name":"setContracts","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"enable","type":"bool"}],"name":"setEnable","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"contract IKyberDao","name":"_kyberDao","type":"address"}],"name":"setKyberDaoContract","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_maxGasPrice","type":"uint256"},{"internalType":"uint256","name":"_negligibleRateDiffBps","type":"uint256"}],"name":"setParams","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address payable","name":"trader","type":"address"},{"internalType":"contract ERC20","name":"src","type":"address"},{"internalType":"uint256","name":"srcAmount","type":"uint256"},{"internalType":"contract ERC20","name":"dest","type":"address"},{"internalType":"address payable","name":"destAddress","type":"address"},{"internalType":"uint256","name":"maxDestAmount","type":"uint256"},{"internalType":"uint256","name":"minConversionRate","type":"uint256"},{"internalType":"address payable","name":"walletId","type":"address"},{"internalType":"bytes","name":"hint","type":"bytes"}],"name":"tradeWithHint","outputs":[{"internalType":"uint256","name":"destAmount","type":"uint256"}],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address payable","name":"trader","type":"address"},{"internalType":"contract IERC20","name":"src","type":"address"},{"internalType":"uint256","name":"srcAmount","type":"uint256"},{"internalType":"contract IERC20","name":"dest","type":"address"},{"internalType":"address payable","name":"destAddress","type":"address"},{"internalType":"uint256","name":"maxDestAmount","type":"uint256"},{"internalType":"uint256","name":"minConversionRate","type":"uint256"},{"internalType":"address payable","name":"platformWallet","type":"address"},{"internalType":"uint256","name":"platformFeeBps","type":"uint256"},{"internalType":"bytes","name":"hint","type":"bytes"}],"name":"tradeWithHintAndFee","outputs":[{"internalType":"uint256","name":"destAmount","type":"uint256"}],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"newAdmin","type":"address"}],"name":"transferAdmin","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newAdmin","type":"address"}],"name":"transferAdminQuickly","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"address payable","name":"sendTo","type":"address"}],"name":"withdrawEther","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"contract IERC20","name":"token","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"address","name":"sendTo","type":"address"}],"name":"withdrawToken","outputs":[],"stateMutability":"nonpayable","type":"function"},{"stateMutability":"payable","type":"receive"}]'
    # result = web3.eth.getLogs(filter_params)
    # print(result)
    # # print(len(result))
    # ad = Web3.toChecksumAddress(0x7c66550c9c730b6fdd4c03bc2e73c5462c5f7acc)
    # # print(ad)
    # web3 = Web3()
    # c = web3.eth.contract(address=ad, abi=contract_abi)

    # print(c.events.KyberTrade().processLog(data))

    # log_entry = receipt['logs'][0]  # pick the log entry you know corresponds to the event.

    # tx_receipt = web3.eth.getTransactionReceipt('0xda4550d71ec9eab79b51a614574e6c629a909c1d44b7276c96e26595e89240aa')
    # print(tx_receipt['logs'][4])
    #
    # log_to_process = tx_receipt['logs'][4]
    # processed_log = c.events.KyberTrade().processLog(log_to_process)
    # print(processed_log)

    # e = c.events.KyberTrade()
    # r = LogReceipt(
    #     address='',
    #     data=HexStr(data),
    #     topic='',
    #     topics=[HexBytes('0x30bbea603a7b36858fe5e3ec6ba5ff59dde039d02120d758eacfaed01520577d'), HexBytes('0x000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee'), HexBytes('0x000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2')],
    #     logIndex=0,
    #     transactionHash='',
    #     transactionIndex=0,
    #     blockHash='',
    #     blockNumber=''
    # )
    #
    # a = get_event_data(e.web3.codec, e.abi, r)
    # print(a.args.ethWeiValue)


if __name__ == '__main__':
    # {
    #     'blockNumber': 10825346,
    #     'transactionHash': HexBytes('0x1ff46aec63a072d1cd2ca5e4890f74d8394f027035ca0c5731e2bef53a20ba72'),
    #     'transactionIndex': 74,
    #     'logIndex': 247,
    #     'address': '0x7C66550C9c730B6fdd4C03bc2e73c5462c5F7ACC',
    #     'blockHash': HexBytes('0x52dfca3c971d51161e82d98f61cf57704b6fa90677efd29beeabfbcb3f3966c2'),
    #
    #     'data': '0x000000000000000000000000000000000000000000000000042ce1293d434e640000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000001e000000000000000000000000000000000000000000000000000000000000002200000000000000000000000000000000000000000000000000000000000000001bb756e6973776170563200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000005f5e10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000ab054e473df810000000000000000000000000000000000000000000000000000000000000000',
    #     'removed': False,
    #     'topics': [HexBytes('0x30bbea603a7b36858fe5e3ec6ba5ff59dde039d02120d758eacfaed01520577d'), HexBytes('0x000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48'), HexBytes('0x000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee')],
    # }
    main()


x = [
'0xf07674f6ac6632e253c291b694f9c2e2ed69ebbb',
'0x3359266b2232bf63710eb0651bb39c13f0f90c3a',
'0x01c1103d765f62a0d909499d7b615c382cdb072d',
'0x141a206ece672e3198086c5d21f7858ad03669ea',
'0xc2baca5300b95ab18eddd9ef3070a0945298ab50',
'0x0eda20f7499aae7bdadc4e52fd72e49663733ed4',
'0x68fd0899fedeeee08b77c189d2f8ac38466ea216',
'0x552f355ccb9b91c8fb47d9c011abad5b72ec30e9',
'0xec4d29fd22066e75746eb68cb51d8a7df7d28356',
'0xb3b67099121e1fbde6276b2802048d1a7dd1b987',
'0x4a67d9b00c077b093ddfb67de2a1c66a70bac0fe',
'0x521c420c2a2b461034becbb41d4888b68951f14f',
'0x9dda491445b0b33976527ed741e0476a16380c49',
'0x431e935209d79706b5866eb42137a3491d845692',
'0xe5df61285e8492d1d4dd6e4651821383512f012f',
'0x414b1da0bb6e948dc0559d14ebde9fa9572499bf',
'0xc0562baaad3ef9e78ac449e3508a4a31c9395e57',
'0x9aed7a25f2d928225e6fb2388055c7363ad6727b',
'0x69076e44a9c70a67d5b79d95795aba299083c275',
'0x8e2a84d6ade1e7fffee039a35ef5f19f13057152',
'0x1e7ca05e174a523709e556080e227f734a8f1483',
'0xf5b59c107f3f7b1c2a7c3d09234bd0a055ad8d55',
'0x7cf03cd77094e913f17fef07bb7d261fd955ea3f',
'0x9dc6c56296e91466fc12d31a694639699e4c37e5',
'0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',
'0x5503e7690e550045e984c2b55902d8986ca2808e',
'0xaec71b3be50bc4cd99b44ea84fcf1ecc913bc33d',
'0x353f8931ce1c52f643121be129985aab09c4bf52',
]